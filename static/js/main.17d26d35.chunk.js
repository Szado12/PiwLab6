(this.webpackJsonplab6=this.webpackJsonplab6||[]).push([[0],{45:function(e,t,r){},46:function(e,t,r){},57:function(e,t,r){},58:function(e,t,r){},74:function(e,t,r){},75:function(e,t,r){},76:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(15),s=r.n(a),i=(r(57),r(12)),o=(r(58),r(9)),u=r.n(o),j=r(16),d=r(98),l=r(100),b=r.p+"static/media/logo.5ef91c58.png",h=r(28),O=(r(60),r(79),r(47)),p=r.n(O);h.a.apps.length?h.a.app():h.a.initializeApp({apiKey:"AIzaSyBu-KsvvWRb7yaItu_6-iMFGjrjsn_cRcs",authDomain:"piw-lab6.firebaseapp.com",projectId:"piw-lab6",storageBucket:"piw-lab6.appspot.com",messagingSenderId:"46440415553",appId:"1:46440415553:web:7cf2c841f25dbd710e61c0",measurementId:"G-HG8PQM2DEK"});var f=h.a.firestore(),x=h.a.auth(),m=function(){var e=Object(j.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.createUserWithEmailAndPassword(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(j.a)(u.a.mark((function e(t,r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x.signInWithEmailAndPassword(t,r));case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.collection("pizzas").get());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.collection("userHistory").where("owner","==",t.uid).get());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.collection("ingredients").get());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(j.a)(u.a.mark((function e(t,r,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.collection("userHistory").add({owner:t.uid,order:r,price:n,date:p()(new Date).format("DD-MM-YYYY")}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),S=r(10),P=r(50),C=r.n(P),I=r(3);function N(e){var t=Object(S.f)(),r=function(){var r=Object(j.a)(u.a.mark((function r(){return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x.signOut().then(e.setUser(null),sessionStorage.removeItem("user"),t.push("/menu"));case 2:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return null===e.user?Object(I.jsxs)(d.a,{bg:"dark",variant:"dark",children:[Object(I.jsx)(d.a.Brand,{href:"#menu",children:Object(I.jsx)("img",{src:b,width:"60",height:"50",className:"d-inline-block align-top",alt:"React Bootstrap logo"})}),Object(I.jsx)(l.a,{className:"mr-auto",children:Object(I.jsx)(l.a.Link,{href:"#menu",children:"Menu"})}),Object(I.jsxs)(l.a,{className:"ml-auto",children:[Object(I.jsx)(l.a.Link,{href:"#user"}),Object(I.jsx)(l.a.Link,{href:"#login",children:"Login"}),Object(I.jsx)(l.a.Link,{href:"#registry",children:"Registry"})]})]}):Object(I.jsxs)(d.a,{bg:"dark",variant:"dark",children:[Object(I.jsx)(d.a.Brand,{href:"#menu",children:Object(I.jsx)("img",{src:b,width:"60",height:"50",className:"d-inline-block align-top",alt:"React Bootstrap logo"})}),Object(I.jsxs)(l.a,{className:"mr-auto",children:[Object(I.jsx)(l.a.Link,{href:"#menu",children:"Menu"}),Object(I.jsx)(l.a.Link,{href:"#create",children:"Create"})]}),Object(I.jsxs)(l.a,{className:"ml-auto",children:[Object(I.jsx)(l.a.Link,{href:"#cart",children:Object(I.jsx)(C.a,{})}),Object(I.jsx)(l.a.Link,{href:"#user",children:e.user.email}),Object(I.jsx)(l.a.Link,{onClick:function(){return r()},children:"Logout"})]})]})}var z=r(95),L=r(96),E=(r(74),r(51)),J=r(93),B=r(94);r(75);function F(e){return Object(I.jsx)(E.a,{sm:12,md:6,children:Object(I.jsxs)("div",{className:"PizzaCard",children:[Object(I.jsx)("h2",{children:e.data.name}),Object(I.jsx)(J.a,{src:e.data.url,fluid:!0}),Object(I.jsxs)("p",{children:[Object(I.jsx)("b",{children:"Ingredients:"}),e.data.ingredients]}),Object(I.jsx)("p",{children:e.data.price}),Object(I.jsx)(B.a,{variant:"success",onClick:function(){return function(){var t=sessionStorage.getItem("order");null==t?sessionStorage.setItem("order",JSON.stringify([{name:e.data.name,price:e.data.price,id:e.id}])):((t=JSON.parse(t)).push({name:e.data.name,price:e.data.price,id:e.id}),sessionStorage.setItem("order",JSON.stringify(t)))}()},children:"Order"})]})})}function R(e){var t=Object(n.useState)([]),r=Object(i.a)(t,2),c=r[0],a=r[1],s=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,v().then((function(e){e.forEach((function(e){t.push({data:e.data(),key:e.id})}))}));case 3:a(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=c.map((function(e){return Object(I.jsx)(F,{data:e.data,id:e.key},e.key)}));return Object(n.useEffect)((function(){s()}),[]),Object(I.jsx)(z.a,{children:Object(I.jsx)("div",{className:"PizzaMenu",children:Object(I.jsx)(L.a,{children:o})})})}var G=r(99);r(45);function M(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),u=o[0],j=o[1],d=Object(n.useState)(""),l=Object(i.a)(d,2),b=l[0],h=l[1],O=Object(S.f)();return Object(I.jsx)(z.a,{children:Object(I.jsx)("div",{className:"PageLogin",children:Object(I.jsx)(E.a,{sm:{span:10,offset:1},children:Object(I.jsxs)(G.a,{children:[Object(I.jsxs)(G.a.Group,{controlId:"formBasicEmail",sm:8,children:[Object(I.jsx)(G.a.Label,{children:"Email address"}),Object(I.jsx)(G.a.Control,{type:"email",onChange:function(e){return j(e.target.value)},placeholder:"Enter email"})]}),Object(I.jsxs)(G.a.Group,{controlId:"formBasicPassword",sm:8,children:[Object(I.jsx)(G.a.Label,{children:"Password"}),Object(I.jsx)(G.a.Control,{type:"password",onChange:function(e){return a(e.target.value)},placeholder:"Password"})]}),Object(I.jsx)("p",{children:b}),Object(I.jsx)(B.a,{variant:"success",onClick:function(){g(u,c).then((function(t){e.setUser(t.user),sessionStorage.setItem("user",JSON.stringify(t.user)),O.push("/menu")})).catch((function(e){return h(e.message)}))},children:"Login"})]})})})})}var D=r(97);r(46);function A(e){var t=Object(n.useState)(JSON.parse(sessionStorage.getItem("order"))),r=Object(i.a)(t,2),c=r[0],a=r[1];if(null===c||c.length<=0)return Object(I.jsx)(z.a,{children:Object(I.jsx)("div",{className:"PizzaCart",children:"No pizzas ordered :("})});var s=c.map((function(e){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:e.name}),Object(I.jsx)("td",{children:e.price}),Object(I.jsx)("td",{children:Object(I.jsx)(B.a,{variant:"danger",onClick:function(){!function(e){var t=c.filter((function(t){return t.id!==e}));a(t),sessionStorage.setItem("order",JSON.stringify(t))}(e.id)},children:"X"})})]},e.id)})),o=c.reduce((function(e,t){return e+t.price}),0).toFixed(2);return Object(I.jsx)(z.a,{children:Object(I.jsxs)("div",{className:"PizzaCart",children:[Object(I.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{children:"Pizza"}),Object(I.jsx)("th",{children:"Price"})]})}),Object(I.jsxs)("tbody",{children:[s,Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Price"}),Object(I.jsx)("td",{children:o})]})]})]}),Object(I.jsx)(B.a,{variant:"success",onClick:function(){return function(){var e=c.reduce((function(e,t){return e+t.price}),0).toFixed(2),t=c.map((function(e){return{id:e.id,name:e.name}})),r=JSON.parse(sessionStorage.getItem("user"));y(r,t,e).then(sessionStorage.removeItem("order"),a([]))}()},children:"Order now!"})]})})}var U=r(43),Y=(r(76),r.p+"static/media/pizzadraw.df283909.png");function H(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(20),s=Object(i.a)(a,2),o=s[0],d=s[1],l=function(){var e=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,k().then((function(e){e.forEach((function(e){t.push({data:e.data(),key:e.id,checked:!1})}))})).then((function(){return c(t)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.map((function(e){return e.key===t?Object(U.a)(Object(U.a)({},e),{},{checked:!e.checked}):e})),c(n),a=20,n.forEach((function(e){e.checked&&(a+=e.data.price)})),d(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return l()}),[]),Object(I.jsx)(z.a,{children:Object(I.jsxs)("div",{className:"PizzaCreate",children:[Object(I.jsx)("h1",{children:"Create your own pizza"}),Object(I.jsx)(J.a,{src:Y,fluid:!0}),Object(I.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{children:"Select"}),Object(I.jsx)("th",{children:"Ingredient"}),Object(I.jsx)("th",{children:"Price"})]})}),Object(I.jsxs)("tbody",{children:[r.map((function(e){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:Object(I.jsx)("input",{type:"checkbox",onChange:function(){return b(e.key)},className:"myCheckbox"})}),Object(I.jsx)("td",{children:e.data.name}),Object(I.jsx)("td",{children:(1*e.data.price).toFixed(2)})]},e.key)})),Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{colSpan:"2",children:"Price:"}),Object(I.jsx)("th",{children:(1*o).toFixed(2)})]})]})]}),Object(I.jsx)(B.a,{variant:"success",onClick:function(){return function(){var e=sessionStorage.getItem("order");null==e?sessionStorage.setItem("order",JSON.stringify([{name:"Created Pizza",price:o,id:1}])):((e=JSON.parse(e)).push({name:"Created Pizza",price:o,id:1}),sessionStorage.setItem("order",JSON.stringify(e)))}()},children:"Order now!"})]})})}function K(e){var t=Object(n.useState)(""),r=Object(i.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(""),o=Object(i.a)(s,2),u=o[0],j=o[1],d=Object(n.useState)(""),l=Object(i.a)(d,2),b=l[0],h=l[1],O=Object(n.useState)(""),p=Object(i.a)(O,2),f=p[0],x=p[1],g=Object(S.f)(),v=function(){(c===u||(x("Passwords are not the same!"),0))&&m(b,c).then((function(e){console.log(e),g.push("/login")})).catch((function(e){return x(e.message)}))};return Object(I.jsx)(z.a,{children:Object(I.jsx)("div",{className:"PageLogin",children:Object(I.jsx)(E.a,{sm:{span:10,offset:1},children:Object(I.jsxs)(G.a,{children:[Object(I.jsxs)(G.a.Group,{controlId:"formBasicEmail",sm:8,children:[Object(I.jsx)(G.a.Label,{children:"Email address"}),Object(I.jsx)(G.a.Control,{type:"email",onChange:function(e){return h(e.target.value)},placeholder:"Enter email"})]}),Object(I.jsxs)(G.a.Group,{controlId:"formBasicPassword",sm:8,children:[Object(I.jsx)(G.a.Label,{children:"Password"}),Object(I.jsx)(G.a.Control,{type:"password",onChange:function(e){return a(e.target.value)},placeholder:"Password"})]}),Object(I.jsxs)(G.a.Group,{controlId:"formBasicRepeatPassword",sm:8,children:[Object(I.jsx)(G.a.Label,{children:"Repeat Password"}),Object(I.jsx)(G.a.Control,{type:"password",onChange:function(e){return j(e.target.value)},placeholder:"Repeat Password"})]}),Object(I.jsx)("p",{children:f}),Object(I.jsx)(B.a,{variant:"success",onClick:function(){return v()},children:"Registry"})]})})})})}function W(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),r=t[0],c=t[1],a=function(){var e=Object(j.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(sessionStorage.getItem("user")),r=[],e.next=4,w(t).then((function(e){e.forEach((function(e){r.push({data:e.data(),key:e.id})}))}));case 4:c(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=r.map((function(e){return Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:e.data.date}),Object(I.jsx)("td",{children:e.data.order.map((function(e){return e.name+"\n"}))}),Object(I.jsxs)("td",{children:[e.data.price," PLN"]})]},e.key)}));return Object(n.useEffect)((function(){return a()}),[]),Object(I.jsx)(z.a,{children:Object(I.jsx)("div",{className:"PizzaCart",children:Object(I.jsxs)(D.a,{striped:!0,bordered:!0,hover:!0,children:[Object(I.jsx)("thead",{children:Object(I.jsxs)("tr",{children:[Object(I.jsx)("th",{children:"Date"}),Object(I.jsx)("th",{children:"Order"}),Object(I.jsx)("th",{children:"Price"})]})}),Object(I.jsx)("tbody",{children:s})]})})})}var T=r(29);var _=function(){var e=Object(n.useState)(JSON.parse(sessionStorage.getItem("user"))),t=Object(i.a)(e,2),r=t[0],c=t[1];return Object(I.jsx)("div",{className:"App",children:Object(I.jsxs)(T.a,{children:[Object(I.jsx)(N,{user:r,setUser:c}),Object(I.jsx)(S.b,{exact:!0,path:"/menu",children:Object(I.jsx)(R,{})}),Object(I.jsx)(S.b,{path:"/user",render:function(){return null!=r?Object(I.jsx)(W,{}):Object(I.jsx)(S.a,{to:"/login"})}}),Object(I.jsx)(S.b,{exact:!0,path:"/login",children:Object(I.jsx)(M,{setUser:c})}),Object(I.jsx)(S.b,{exact:!0,path:"/registry",children:Object(I.jsx)(K,{})}),Object(I.jsx)(S.b,{path:"/cart",render:function(){return null!=r?Object(I.jsx)(A,{}):Object(I.jsx)(S.a,{to:"/login"})}}),Object(I.jsx)(S.b,{path:"/create",render:function(){return null!=r?Object(I.jsx)(H,{}):Object(I.jsx)(S.a,{to:"/login"})}})]})})},Q=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,101)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};s.a.render(Object(I.jsx)(c.a.StrictMode,{children:Object(I.jsx)(_,{})}),document.getElementById("root")),Q()}},[[78,1,2]]]);
//# sourceMappingURL=main.17d26d35.chunk.js.map